# üì¶ Project Analysis API - –°–µ—Ä–≤–µ—Ä–Ω–∏–π –∞–Ω–∞–ª—ñ–∑ –ø—Ä–æ–µ–∫—Ç—É

## –©–æ –¥–æ–¥–∞–Ω–æ:

**–ù–æ–≤–∏–π API endpoint** –¥–ª—è –ø–æ–≤–Ω–æ–≥–æ –∞–Ω–∞–ª—ñ–∑—É –ø—Ä–æ–µ–∫—Ç—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ!

### Endpoint:

```
POST /api/devhelper/analyze-project
```

## –ü–µ—Ä–µ–≤–∞–≥–∏ –Ω–∞–¥ –∫–ª—ñ—î–Ω—Ç—Å—å–∫–∏–º –∞–Ω–∞–ª—ñ–∑–æ–º:

### ‚ùå –ö–ª—ñ—î–Ω—Ç—Å—å–∫–∏–π –∞–Ω–∞–ª—ñ–∑ (—Å—Ç–∞—Ä–∏–π):

- –¢—ñ–ª—å–∫–∏ –ø–æ—Ç–æ—á–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞
- –¢—ñ–ª—å–∫–∏ CSS
- CORS –±–ª–æ–∫—É—î –∑–æ–≤–Ω—ñ—à–Ω—ñ —Ñ–∞–π–ª–∏
- –ù–µ –±–∞—á–∏—Ç—å JavaScript —Ñ—É–Ω–∫—Ü—ñ—ó

### ‚úÖ –°–µ—Ä–≤–µ—Ä–Ω–∏–π –∞–Ω–∞–ª—ñ–∑ (–Ω–æ–≤–∏–π):

- **–í–µ—Å—å –ø—Ä–æ–µ–∫—Ç** (–≤—Å—ñ —Ñ–∞–π–ª–∏)
- **CSS + JavaScript**
- –ù–µ–º–∞—î CORS –æ–±–º–µ–∂–µ–Ω—å
- –†–µ–∞–ª—å–Ω–∏–π –∞–Ω–∞–ª—ñ–∑ —Ñ—É–Ω–∫—Ü—ñ–π —á–µ—Ä–µ–∑ TypeScript API

## –Ø–∫ –ø—Ä–∞—Ü—é—î:

### 1. –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø—Ä–æ–µ–∫—Ç—É

```typescript
// –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î ZIP –∞—Ä—Ö—ñ–≤ –ø—Ä–æ–µ–∫—Ç—É
<input type="file" accept=".zip" onChange={handleUpload} />
```

### 2. –°–µ—Ä–≤–µ—Ä–Ω–∞ –æ–±—Ä–æ–±–∫–∞

```typescript
// 1Ô∏è‚É£ –†–æ–∑–ø–∞–∫–æ–≤—É—î–º–æ ZIP
const zip = new AdmZip(zipPath);
zip.extractAllTo(tempDir, true);

// 2Ô∏è‚É£ –ó–Ω–∞—Ö–æ–¥–∏–º–æ –≤—Å—ñ —Ñ–∞–π–ª–∏
const cssFiles = glob.sync(`${tempDir}/**/*.css`);
const tsFiles = glob.sync(`${tempDir}/**/*.{ts,tsx,js,jsx}`);

// 3Ô∏è‚É£ –ê–Ω–∞–ª—ñ–∑—É—î–º–æ CSS
cssFiles.forEach((f) => {
  const content = fs.readFileSync(f, "utf8");
  const matches = content.match(/\.[a-zA-Z0-9_-]+/g);
  // –ó–±–∏—Ä–∞—î–º–æ –≤—Å—ñ –∫–ª–∞—Å–∏
});

// 4Ô∏è‚É£ –ê–Ω–∞–ª—ñ–∑—É—î–º–æ JavaScript —á–µ—Ä–µ–∑ TypeScript API
const source = ts.createSourceFile(file, code, ts.ScriptTarget.Latest);
ts.forEachChild(source, (node) => {
  if (ts.isFunctionDeclaration(node)) {
    // –ó–Ω–∞—Ö–æ–¥–∏–º–æ —Ñ—É–Ω–∫—Ü—ñ—ó
  }
});

// 5Ô∏è‚É£ –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏
return { unusedCSS, unusedFunctions };
```

## –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:

### –£ Next.js –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ:

```typescript
const analyzeProject = async (file: File) => {
  const formData = new FormData();
  formData.append("project", file);

  const response = await fetch("/api/devhelper/analyze-project", {
    method: "POST",
    body: formData,
  });

  const data = await response.json();
  // data.unusedCSS - –Ω–µ–≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω—ñ CSS –∫–ª–∞—Å–∏
  // data.unusedFunctions - –Ω–µ–≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó
};
```

### –£ UI:

```tsx
<input
  type="file"
  accept=".zip"
  onChange={(e) => {
    const file = e.target.files?.[0];
    if (file) analyzeProject(file);
  }}
/>
```

## –§–æ—Ä–º–∞—Ç –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ:

```json
{
  "success": true,
  "unusedCSS": ["old-button", "deprecated-header", "unused-modal"],
  "unusedFunctions": [
    "oldLegacyFunction",
    "deprecatedHelper",
    "unusedValidator"
  ],
  "stats": {
    "totalCSSClasses": 150,
    "totalFunctions": 45,
    "unusedCSSCount": 15,
    "unusedFunctionsCount": 3
  }
}
```

## –©–æ –∞–Ω–∞–ª—ñ–∑—É—î—Ç—å—Å—è:

### ‚úÖ CSS:

- –í—Å—ñ `.css` —Ñ–∞–π–ª–∏ –≤ –ø—Ä–æ–µ–∫—Ç—ñ
- –í–∏—Ç—è–≥—É—î –≤—Å—ñ –∫–ª–∞—Å–∏ (`.class-name`)
- –ü–µ—Ä–µ–≤—ñ—Ä—è—î —á–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –≤ `.js`, `.jsx`, `.ts`, `.tsx`, `.html`

### ‚úÖ JavaScript:

- –í—Å—ñ `.js`, `.jsx`, `.ts`, `.tsx` —Ñ–∞–π–ª–∏
- –ó–Ω–∞—Ö–æ–¥–∏—Ç—å –≤—Å—ñ —Ñ—É–Ω–∫—Ü—ñ—ó —á–µ—Ä–µ–∑ TypeScript AST
- –ü–µ—Ä–µ–≤—ñ—Ä—è—î —á–∏ –≤–∏–∫–ª–∏–∫–∞—é—Ç—å—Å—è (`functionName(`)

### ‚ùå –Ü–≥–Ω–æ—Ä—É—î—Ç—å—Å—è:

- `node_modules/`
- `.next/`
- `dist/`

## –ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:

### 1. –°—Ç–≤–æ—Ä—ñ—Ç—å ZIP –∞—Ä—Ö—ñ–≤ –ø—Ä–æ–µ–∫—Ç—É:

```bash
zip -r my-project.zip src/ public/ styles/
```

### 2. –ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ —á–µ—Ä–µ–∑ UI:

```
üì¶ –ê–±–æ –∑–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ ZIP –∞—Ä—Ö—ñ–≤ –ø—Ä–æ–µ–∫—Ç—É –¥–ª—è –ø–æ–≤–Ω–æ–≥–æ –∞–Ω–∞–ª—ñ–∑—É:
[–í–∏–±—Ä–∞—Ç–∏ —Ñ–∞–π–ª]
```

### 3. –û—Ç—Ä–∏–º–∞–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏:

```
üìä –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –∞–Ω–∞–ª—ñ–∑—É

–ù–µ–≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–∏–π CSS: 15
–ù–µ–≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó: 3

üé® –ù–µ–≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω—ñ CSS –∫–ª–∞—Å–∏
.old-button
.deprecated-header
...

‚ö° –ù–µ–≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó
oldLegacyFunction()
deprecatedHelper()
...
```

## –û–±–º–µ–∂–µ–Ω–Ω—è:

### ‚ö†Ô∏è –†–æ–∑–º—ñ—Ä —Ñ–∞–π–ª—É:

- –ú–∞–∫—Å–∏–º—É–º –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å Next.js
- –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º: 4MB
- –ú–æ–∂–Ω–∞ –∑–±—ñ–ª—å—à–∏—Ç–∏ –≤ `next.config.js`:

```javascript
module.exports = {
  api: {
    bodyParser: {
      sizeLimit: "10mb",
    },
  },
};
```

### ‚ö†Ô∏è –ß–∞—Å –æ–±—Ä–æ–±–∫–∏:

- –ó–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ —Ä–æ–∑–º—ñ—Ä—É –ø—Ä–æ–µ–∫—Ç—É
- –ú–∞–ª–∏–π –ø—Ä–æ–µ–∫—Ç (<100 —Ñ–∞–π–ª—ñ–≤): ~2-5 —Å–µ–∫—É–Ω–¥
- –°–µ—Ä–µ–¥–Ω—ñ–π –ø—Ä–æ–µ–∫—Ç (100-500 —Ñ–∞–π–ª—ñ–≤): ~10-30 —Å–µ–∫—É–Ω–¥
- –í–µ–ª–∏–∫–∏–π –ø—Ä–æ–µ–∫—Ç (>500 —Ñ–∞–π–ª—ñ–≤): >30 —Å–µ–∫—É–Ω–¥

### ‚ö†Ô∏è –¢–æ—á–Ω—ñ—Å—Ç—å:

- **CSS:** –í–∏—Å–æ–∫–∞ —Ç–æ—á–Ω—ñ—Å—Ç—å (–ø–µ—Ä–µ–≤—ñ—Ä—è—î –≤—Å—ñ —Ñ–∞–π–ª–∏)
- **JavaScript:** –ë–∞–∑–æ–≤–∞ —Ç–æ—á–Ω—ñ—Å—Ç—å (–Ω–µ –±–∞—á–∏—Ç—å –¥–∏–Ω–∞–º—ñ—á–Ω—ñ –≤–∏–∫–ª–∏–∫–∏)

## –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è —è–∫—ñ –º–æ–∂–Ω–∞ –¥–æ–¥–∞—Ç–∏:

### 1. –ü—Ä–æ–≥—Ä–µ—Å-–±–∞—Ä:

```typescript
// WebSocket –¥–ª—è real-time –ø—Ä–æ–≥—Ä–µ—Å—É
socket.on("progress", (percent) => {
  setProgress(percent);
});
```

### 2. –ö–µ—à—É–≤–∞–Ω–Ω—è:

```typescript
// –ó–±–µ—Ä—ñ–≥–∞—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–∏—Ö –∞–Ω–∞–ª—ñ–∑—ñ–≤
const cacheKey = crypto.createHash("md5").update(buffer).digest("hex");
```

### 3. –î–µ—Ç–∞–ª—å–Ω—ñ—à–∏–π –∞–Ω–∞–ª—ñ–∑:

```typescript
// –ü–æ–∫–∞–∑—É–≤–∞—Ç–∏ –¥–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –∫–æ–∂–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è
{
  name: "oldFunction",
  usedIn: ["file1.ts:45", "file2.ts:12"]
}
```

### 4. –ï–∫—Å–ø–æ—Ä—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤:

```typescript
// –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —è–∫ JSON/CSV
downloadResults(data, "unused-code-report.json");
```

## –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è:

| –§—É–Ω–∫—Ü—ñ—è    | –ö–ª—ñ—î–Ω—Ç—Å—å–∫–∏–π         | –°–µ—Ä–≤–µ—Ä–Ω–∏–π         |
| ---------- | ------------------- | ----------------- |
| CSS –∞–Ω–∞–ª—ñ–∑ | ‚úÖ –ü–æ—Ç–æ—á–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ | ‚úÖ –í–µ—Å—å –ø—Ä–æ–µ–∫—Ç    |
| JS –∞–Ω–∞–ª—ñ–∑  | ‚ùå –ù–µ–º–æ–∂–ª–∏–≤–æ        | ‚úÖ TypeScript API |
| CORS       | ‚ö†Ô∏è –ë–ª–æ–∫—É—î –∑–æ–≤–Ω—ñ—à–Ω—ñ  | ‚úÖ –ù–µ–º–∞—î –æ–±–º–µ–∂–µ–Ω—å |
| –®–≤–∏–¥–∫—ñ—Å—Ç—å  | ‚ö° –ú–∏—Ç—Ç—î–≤–æ          | ‚è±Ô∏è 5-30 —Å–µ–∫—É–Ω–¥    |
| –¢–æ—á–Ω—ñ—Å—Ç—å   | ‚ö†Ô∏è –ù–∏–∑—å–∫–∞           | ‚úÖ –í–∏—Å–æ–∫–∞         |

## –í–∏—Å–Ω–æ–≤–æ–∫:

–¢–≤–æ—è —Ñ—É–Ω–∫—Ü—ñ—è **–Ω–∞–±–∞–≥–∞—Ç–æ –∫—Ä–∞—â–∞** –¥–ª—è –ø–æ–≤–Ω–æ–≥–æ –∞–Ω–∞–ª—ñ–∑—É –ø—Ä–æ–µ–∫—Ç—É!

**–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π:**

- **–ö–ª—ñ—î–Ω—Ç—Å—å–∫–∏–π –∞–Ω–∞–ª—ñ–∑** - –¥–ª—è —à–≤–∏–¥–∫–æ—ó –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –ø–æ—Ç–æ—á–Ω–æ—ó —Å—Ç–æ—Ä—ñ–Ω–∫–∏
- **–°–µ—Ä–≤–µ—Ä–Ω–∏–π –∞–Ω–∞–ª—ñ–∑** - –¥–ª—è –ø–æ–≤–Ω–æ–≥–æ –∞—É–¥–∏—Ç—É –≤—Å—å–æ–≥–æ –ø—Ä–æ–µ–∫—Ç—É

–¢–µ–ø–µ—Ä DevHelper –º–∞—î –æ–±–∏–¥–≤–∞ –≤–∞—Ä—ñ–∞–Ω—Ç–∏! üéâ
